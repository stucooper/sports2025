\documentclass{article}

\title{The sports2025 footy tracking programs}
\author{Stuart Cooper\\stuart.cooper@gmail.com\\Sydney Perl User Group}
\date{August 20, 2025}

\begin{document}

\maketitle

This talk is a demonstration of my sports2025 suite of programs to
follow AFL (Australian Football) and NRL (Rugby League) in 2025.
The code is on a public repository at
https://github.com/stucooper/sports2025.git

\section{Goals}

\begin{itemize}
  \item Good practice using Perl
  \item Produce football ladders and tipping results on demand
  \item Be an electronic version of my physical A4 Sportsbook
  \item Enhance my enjoyment and engagement with footy
  \item Be extensible with new languages and methodologies
  \item A new version each year with improved code
  \item Other sports can be added with some effort and understanding
\end{itemize}

\section{Three letter team codes}

An early challenge for the project was coming up with unique
three-letter codes for each team in both types of footy.

World soccer has a standard list of 211 (when I checked) three-letter
country codes (``trigrams'' or ``trigraphs'') to represent countries
and member federations. Another area of life with standard trigraphs
is International Airport Codes.

Early C language had trigraphs to support keyboards that couldn't type
exotic characters like \{, \} and even \textbackslash\ itself. These
trigraphs are \verb!??<, ??>! and \verb!??/! respectively.

My trigraphs, especially in NRL, are Stuart-friendly; I'm the only one
who needs to understand them so I use names that make the most sense
to me. When Brisbane Broncos beat Melbourne Storm 20 to 12, that's BRI
20 MEL 12.

\subsection{AFL teams}

There are eighteen teams; ten in Melbourne, two each in Sydney, Brisbane,
Adelaide and Perth. A full round of football games has one game
Thursday night, one game Friday night, four games Saturday and three
games Sunday. Public holiday Mondays and Anzac Day will reshape those
rounds.

Each of the 18 teams have a unique three letter name. Testing scripts
ensure that the names entered for fixtures, results and tips files are
consistent.

In the next five years there could be a new team, Tasmania, join the
competition although there are significant political and financial
obstacles to be overcome.

Historically AFL clubs have avoided mergers. Sadly pressure in 1999 to
merge the Melbourne Demons (``Dees'') and Hawthorn (``Hawks'')
failed; if that merger went ahead we would have had the ``Dorks''.
Two underperforming Melbourne clubs have re-located; the South
Melbourne Swans were sent to Sydney in the 1980s and the Fitzroy Lions
went to Brisbane in the 1990s.

\subsection{NRL teams}

There are seventeen teams; one in Melbourne, New Zealand and Canberra,
four in Queensland and the rest in New South Wales.
Most of the teams are known just as strongly
by their animal mascots; St George Dragons, Canberra Raiders,
Redcliffe Dolphins. The famous South Sydney team are the Rabbitohs. A
Rabbitoh is not a rabbit, but a \textit{seller} of rabbit meat. During
the depression era of the 1930s, rabbits were sold by a travelling
vendor called a Rabbitoh.

Two of the Sydney teams have abandoned their old suburban names
and now called themselves ``Sydney'' animals; Eastern Suburbs is now
the Sydney Roosters and Canterbury Bankstown is now the Sydney
Bulldogs. I reluctantly use the mascot names for these teams; ROO and
BUL instead of the geographical EAS and CBY. Some of my abbreviations
make sense to me and almost nobody else; I use AUK for the New Zealand
Warriors because they play their home games in Auckland and RED for
the Redcliffe (suburb of Queensland) Dolphins; commentators and media
rarely use the suburb and just call that team the Dolphins, for me
they're RED.

In the 2000s there were mergers between teams, joint ventures as
the number of Sydney teams needed to shrink. In the south, St George
merged with Illawarra to become St George Illawarra; to me they're
simply St George: STG. Balmain Tigers merged with Western Suburbs
Magpies to become Wests Tigers: WTI.

Two new teams are joining the competition in the next five years;
Perth Bears (PER) and New Guinea (PNG).

The name checking testing scripts bomb out a lot more for my NRL files
than they do for my AFL files.

NRL rounds are typically one game Thursday night, two games Friday
night, three games Saturday and two games Sunday. Like the AFL games
are played on special occasions like Anzac Day and holiday Mondays.

\section{ladder.pl}

The first program written was ladder.pl. There is an NRL version and
an AFL version; with minimum differences but still a few because the
ladders are calculated differently.

Because of AFL Round 0\footnote{Round Zero has just four games, home
games for the four Sydney and Brisbane teams, to promote
Aussie Rules in NSW and QLD.  AFL fans \emph{hate}
Round Zero. In 2025 Cyclone Alfred made the AFL call off the
Brisbane games and there were just two lacklustre Sydney games.
In 2024 the AFL's most hated team, Collingwood, had lost 4 games by
the end of Round 3.} the AFL is numerically one round behind the NRL;
in the July/August weekend we had NRL Round 22 and AFL Round 21.

\begin{verbatim}
# NRL Round 22
20250731 MEL 16 PAR 10
... more games unshown ...
20250803 CRO 32 NQL 12
BYES: NEW
\end{verbatim}

In the NRL scoring system a team with a week off (the ``Bye'') scores
2 competition points that round, the same as if they had played and
won. So the NRL results files finish with the team(s) that had the bye
that week.

ladder.pl has a StopRound -n argument to show what the ladder was
after that round. Here is the NRL ladder after Round 21.

\begin{verbatim}
/home/scooper/sports2025/nrl/bin: ./ladder.pl -n 21
... output snipped ...
processing results file round21.txt
Pos TEAM  P  W  D  L  B   F    A   +- Pts
  1 CAN  19 16  0   3 2  546  388  158 36
  2 BUL  18 14  0   4 3  428  292  136 34
  3 MEL  18 13  0   5 3  567  345  222 32
  4 AUK  18 12  0   6 3  391  363   28 30
  5 PEN  18 10  1   7 3  420  341   79 27
  6 BRI  18 10  0   8 3  466  388   78 26
  7 CRO  19 11  0   8 2  435  412   23 26
  8 RED  18  9  0   9 3  533  364  169 24
=========================================
  9 MAN  18  9  0   9 3  402  380   22 24
 10 ROO  18  8  0  10 3  451  447    4 22
 11 NQL  19  7  1  11 2  406  563 -157 19
 12 STG  18  6  0  12 3  404  468  -64 18
 13 WTI  19  7  0  12 2  357  492 -135 18
 14 PAR  18  6  0  12 3  335  482 -147 18
 15 NEW  19  6  0  13 2  284  400 -116 16
 16 GCT  18  5  0  13 3  370  519 -149 16
 17 SOU  19  6  0  13 2  327  478 -151 16
/home/scooper/sports2025/nrl/bin:
\end{verbatim}

\subsection{Code Highlights}

There are two highlights of the code worth sharing here:

Get the resultsfiles (in sorted order) and process each one:
\begin{verbatim}
opendir (my $resultsdirfh, $resultsdir)
    or die "cannot open $resultsdir: $!\n";

my @resultsfiles = grep { /.txt$/ } sort readdir $resultsdirfh;

foreach my $file (@resultsfiles) {
    processResultFile($file);
}

\end{verbatim}

Now that the \%ladder structure has the information for each team,
sort it

\begin{verbatim}
my @teams = @NRL::Teams;
my @sorted = sort { $ladder{$b}{points} <=> $ladder{$a}{points}
                                         ||
                      $ladder{$b}{diff} <=> $ladder{$a}{diff}
                                         ||
                                     $a cmp $b
} @teams;
\end{verbatim}

\section{tipscore.pl}

The second program of the suite is tipscore.pl; a program that scores
my tipping in both NRL and AFL. Office tipping competitions are a fun
feature of corporate life and for those of us not in a corporate job
it's easy to find other tipping competitions to take part in.

Because footy is now played Thursday to Sunday not Friday to Sunday
the ``get your tips in by Friday COB'' no longer applies; it's also
annoying for people in pub tipping competitions who need to visit the
pub or otherwise get their tips in on Thursday nights not Friday
nights.

tipping.pl uses the results/round*.txt and tips/round*.txt files. The
tips need to be in the same order as the results otherwise it won't
work. Again there's a -n StopRound flag. A -b ``breakdown'' flag shows
my tipping efficiency for each team.

\begin{verbatim}
/home/scooper/sports2025/afl: cat results/round0[01].txt
# Two Queensland games postponed Cyclone Alfred
# Friday
20250307 HAW  96 SYD  76
# Sunday
20250309 GWS 104 COL  52
20250313 RIC  82 CAR  69
20250314 HAW 111 ESS  85
20250315 GEE 147 FRE  69
20250315 BRI  86 SYD  82
20250315 WBD 113 NOR  97
20250315 COL 136 POR  45
20250316 ADE 135 STK  72
20250316 GWS  77 MEL  74
20250316 GCT 136 WCT  49
/home/scooper/sports2025/afl: cat tips/round0[01].txt
SYD d HAW 16
COL d GWS
CAR d RIC 33
HAW d ESS
GEE d FRE
SYD d BRI
WBD d NOR
COL d POR
ADE d STK
GWS d MEL
WCT d GCT
/home/scooper/sports2025/afl: ./bin/tipscore.pl -n 1
processing results file round00.txt..0/2
processing results file round01.txt..6/9

totalGames:  11
winningTips: 6
54.55%
/home/scooper/sports2025/afl: ./bin/tipscore.pl -n 1 -b
processing results file round00.txt..0/2
processing results file round01.txt..6/9

totalGames:  11
winningTips: 6
54.55%

TIPPING EFFICIENCY
ADE 1/1   BRI 0/1   CAR 0/1
COL 1/2   ESS 1/1   FRE 1/1
GCT 0/1   GEE 1/1   GWS 1/2
HAW 1/2   MEL 1/1   NOR 1/1
POR 1/1   RIC 0/1   STK 1/1
SYD 0/2   WBD 1/1   WCT 0/1

/home/scooper/sports2025/afl:
\end{verbatim}

\section{ptwscore.pl}

The final program scores a ``Pick the Winners'' bet. Pick the Winners
is a longstanding bet in NRL under the ``Footy TAB'' banner. Each
match has the team expected to lose given a points start to try to
even things up. If that team loses, but wins once the point start is
applied, they win for the purposes of Pick the Winners.

I won't show code, I'll just demonstrate the program in action.

\begin{verbatim}
/home/scooper/sports2025/nrl/bets: cat ptw_round20.txt
RED -5.5
CRO -2.5
PEN -13.5
CAN -11.5
STG +8.5
MEL -8.5
WTI -5.5
AUK -6.5
/home/scooper/sports2025/nrl/bets: ../bin/ptwscore.pl ptw_round20.txt
Scoring Pick the Winners for Round 20
Game 1: RED -5.5
20250717 RED 43 NQL 24  adjusted RED 37.5 NQL 24
1/1
Game 2: CRO -2.5
20250718 CRO 31 ROO 18  adjusted CRO 28.5 ROO 18
2/2
Game 3: PEN -13.5
20250718 PEN 30 SOU 10  adjusted PEN 16.5 SOU 10
3/3
Game 4: CAN -11.5
20250719 CAN 40 PAR 16  adjusted CAN 28.5 PAR 16
4/4
Game 5: STG +8.5
20250719 BUL 20 STG 18  adjusted STG 26.5 BUL 20
5/5
Game 6: MEL -8.5
20250719 MAN 18 MEL 16  adjusted MEL 7.5 MAN 18
5/6
Game 7: WTI -5.5
20250720 WTI 21 GCT 20  adjusted WTI 15.5 GCT 20
5/7
Game 8: AUK -6.5
20250720 AUK 20 NEW 15  adjusted AUK 13.5 NEW 15
5/8
\end{verbatim}

\end{document}
